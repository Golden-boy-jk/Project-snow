<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –¥–µ—Ä–µ–≤–Ω—è</title>

    <!-- –í–ê–ñ–ù–û –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö Android/iOS -->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />

    <!-- –®—Ä–∏—Ñ—Ç -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --beat: 0.4;          /* "–¥—ã—Ö–∞–Ω–∏–µ" –æ–≥–æ–Ω—å–∫–æ–≤ 0..1 */
            --accent: #ffd76b;
            --accent2: #ff4b7d;
            --accent3: #4be3ff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: #020514;
            color: #f5f7ff;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent; /* –ø—Ä–∏—è—Ç–Ω–µ–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }

        .scene {
            position: relative;
            width: 100vw;
            height: 100vh;
            min-height: 100dvh; /* —á—Ç–æ–±—ã –Ω–µ –æ–±—Ä–µ–∑–∞–ª–æ –∏–∑-–∑–∞ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
        }

        /* –§–æ–Ω ‚Äî —Ç–≤–æ—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ */
        .bg {
            position: absolute;
            inset: 0;
            background-image: url("image1.jpg");
            background-size: cover;
            background-position: center;
            filter: saturate(1.05) contrast(1.05);
            transform: scale(1.02);
        }

        .overlay-gradient {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(circle at top, rgba(0,0,0,0.15), transparent 55%),
                linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.6));
            mix-blend-mode: multiply;
        }

        /* –°–Ω–µ–≥ */
        #snow {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        /* --- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –Ω–µ–æ–Ω–æ–≤–∞—è –Ω–∞–¥–ø–∏—Å—å —Å –∏—Å–∫—Ä–∞–º–∏ --- */
        .tree-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -60%);
            text-align: center;
            pointer-events: none;
            white-space: nowrap;
            z-index: 5;
        }

        .tree-text-main {
            display: inline-block;
            font-size: 3.2rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: #ffffff;
            text-shadow:
                0 0 8px #ffffff,
                0 0 16px #dffaff,
                0 0 28px #8be9ff,
                0 0 48px #4be3ff,
                0 0 80px #4be3ff;
            animation: text-glow 3s ease-in-out infinite alternate;
        }

        @keyframes text-glow {
            0% {
                opacity: 0.9;
                text-shadow:
                    0 0 6px #fff,
                    0 0 14px #b5f2ff,
                    0 0 28px #6cdfff,
                    0 0 50px #4be3ff,
                    0 0 90px #4be3ff;
            }
            100% {
                opacity: 1;
                text-shadow:
                    0 0 10px #fff,
                    0 0 20px #e7fbff,
                    0 0 40px #a4f4ff,
                    0 0 70px #5cdfff,
                    0 0 120px #4be3ff;
            }
        }

        .spark {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #fff 0 40%, rgba(255,255,255,0) 70%);
            box-shadow:
                0 0 6px rgba(255,255,255,0.9),
                0 0 16px #ffe66d;
            opacity: 0;
            pointer-events: none;
        }

        .spark-1 { top: -40px; left: -80px; animation: spark-fly 1.8s linear infinite; }
        .spark-2 { top: -50px; right: -90px; animation: spark-fly 2.2s linear infinite 0.3s; }
        .spark-3 { bottom: -10px; left: -100px; animation: spark-fly 2.1s linear infinite 0.6s; }
        .spark-4 { bottom: 0; right: -70px; animation: spark-fly 1.7s linear infinite 0.9s; }

        @keyframes spark-fly {
            0% {
                opacity: 0;
                transform: translate(0, 0) scale(0.3);
            }
            10% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translate(40px, -40px) scale(0);
            }
        }

        .lights-layer {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .lights-row {
            position: absolute;
            display: flex;
            gap: 1.5vw;
        }

        .lights-row.top-left {
            top: 18vh;
            left: 7vw;
        }
        .lights-row.top-right {
            top: 18vh;
            right: 7vw;
        }

        .light-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--color, var(--accent));
            box-shadow:
                0 0 calc(4px + 10px * (0.4 + var(--beat))) currentColor,
                0 0 calc(10px + 16px * (0.5 + var(--beat))) currentColor;
            opacity: 0.75;
            animation: flicker 2.2s ease-in-out infinite alternate;
            animation-delay: var(--delay, 0s);
            mix-blend-mode: screen;
        }

        @keyframes flicker {
            0%   { opacity: 0.35; transform: translateY(0); }
            30%  { opacity: 0.9;  transform: translateY(-1px); }
            60%  { opacity: 0.6; }
            100% { opacity: 1;   transform: translateY(1px); }
        }

        /* –ú–ê–õ–ï–ù–¨–ö–ê–Ø –ü–ê–ù–ï–õ–¨ */
        .ui-panel {
            position: absolute;
            bottom: 4vh;
            left: 50%;
            transform: translateX(-50%);
            width: 260px;
            padding: 12px 16px;
            background:
                linear-gradient(135deg, rgba(10,16,40,0.96), rgba(6,20,60,0.94));
            border-radius: 18px;
            box-shadow:
                0 0 18px rgba(0,0,0,0.8),
                0 0 calc(18px + 14px * var(--beat)) rgba(0, 200, 255, 0.35);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255,255,255,0.15);
            text-align: center;
        }

        .ui-panel h1 {
            font-size: 1rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .ui-panel p {
            font-size: 0.72rem;
            opacity: 0.9;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: stretch;
        }

        .btn {
            border: none;
            outline: none;
            cursor: pointer;
            border-radius: 999px;
            padding: 10px 0;
            min-height: 40px; /* –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–∞—á-—Ç–∞—Ä–≥–µ—Ç */
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            color: #fff;
            transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
        }

        .btn-primary {
            background: radial-gradient(circle at 0 0, #fff 0 8%, var(--accent2) 25%, #9b2cff 100%);
            box-shadow:
                0 10px 20px rgba(0,0,0,0.8),
                0 0 calc(8px + 14px * var(--beat)) rgba(255, 75, 125, 0.7);
        }

        .btn-secondary {
            margin-top: 4px;
            background: linear-gradient(135deg, #28c76f, #00bcd4);
            box-shadow: 0 6px 14px rgba(0,0,0,0.65);
        }

        .btn:hover {
            transform: translateY(-1px) scale(1.02);
            filter: brightness(1.07);
        }

        .btn:active {
            transform: translateY(1px) scale(0.98);
            box-shadow:
                0 4px 10px rgba(0,0,0,0.7),
                0 0 14px rgba(255, 75, 125, 0.75);
        }

        .hint {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        /* –ü—Ä—è—á–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–π –ø–ª–µ–µ—Ä ‚Äî –æ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–≤—É–∫–∞ */
        audio {
            display: none;
        }

        /* –ú–æ–¥–∞–ª "–ü–æ–¥–∞—Ä–æ—á–µ–∫" */
        .gift-modal {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at top, rgba(255,255,255,0.06), transparent 60%),
                        rgba(2, 5, 20, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
            z-index: 10;
        }

        .gift-modal.show {
            opacity: 1;
            pointer-events: all;
        }

        .gift-card {
            position: relative;
            max-width: 340px;
            width: 90vw;
            padding: 24px 22px 18px;
            border-radius: 18px;
            background: linear-gradient(145deg, rgba(6,16,40,0.98), rgba(20,40,80,0.98));
            box-shadow:
                0 0 25px rgba(0,0,0,0.8),
                0 0 40px rgba(0, 200, 255, 0.35);
            border: 1px solid rgba(255,255,255,0.16);
            text-align: center;
            color: #f5f7ff;
        }

        .gift-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .gift-text {
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0.95;
            margin-bottom: 14px;
        }

        .gift-close {
            position: absolute;
            top: 8px;
            right: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            opacity: 0.75;
        }

        .gift-close:hover {
            opacity: 1;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è (–æ–±—â–∞—è) */
        @media (max-width: 768px) {
            .tree-text {
                transform: translate(-50%, -55%);
                white-space: normal;       /* —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
                padding: 0 0.75rem;
            }

            .tree-text-main {
                font-size: 1.8rem;
                letter-spacing: 0.08em;
            }

            .spark {
                width: 6px;
                height: 6px;
            }

            .ui-panel {
                width: 220px;
                bottom: 2vh;
                padding: 10px 14px;
            }

            .ui-panel h1 {
                font-size: 0.9rem;
            }

            .ui-panel p {
                font-size: 0.68rem;
            }

            .btn {
                font-size: 0.75rem;
                padding: 8px 0;
                min-height: 38px;
            }

            .gift-card {
                padding: 20px 16px 16px;
            }

            .gift-title {
                font-size: 1rem;
            }

            .gift-text {
                font-size: 0.85rem;
            }
        }

        /* –û—á–µ–Ω—å —É–∑–∫–∏–µ / –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã (—Å—Ç–∞—Ä—ã–µ Android, SE –∏ —Ç.–ø.) */
        @media (max-width: 400px) {
            .tree-text-main {
                font-size: 1.5rem;
                letter-spacing: 0.05em;
            }

            .tree-text {
                transform: translate(-50%, -52%);
                padding: 0 0.5rem;
            }

            .ui-panel {
                width: 200px;
            }
        }
    </style>
</head>
<body>
<div class="scene">
    <div class="bg"></div>
    <div class="overlay-gradient"></div>

    <canvas id="snow"></canvas>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –Ω–µ–æ–Ω–æ–≤–∞—è –Ω–∞–¥–ø–∏—Å—å + –∏—Å–∫—Ä—ã -->
    <div class="tree-text">
        <span class="tree-text-main">–° –ù–û–í–´–ú 2025 –ì–û–î–û–ú!</span>
        <span class="spark spark-1"></span>
        <span class="spark spark-2"></span>
        <span class="spark spark-3"></span>
        <span class="spark spark-4"></span>
    </div>

    <div class="lights-layer">
        <div class="lights-row top-left">
            <div class="light-dot" style="--color: var(--accent);  --delay: 0s;"></div>
            <div class="light-dot" style="--color: var(--accent2); --delay: .3s;"></div>
            <div class="light-dot" style="--color: var(--accent3); --delay: .6s;"></div>
            <div class="light-dot" style="--color: var(--accent2); --delay: .9s;"></div>
            <div class="light-dot" style="--color: var(--accent3); --delay: 1.2s;"></div>
        </div>

        <div class="lights-row top-right">
            <div class="light-dot" style="--color: var(--accent3); --delay: .2s;"></div>
            <div class="light-dot" style="--color: var(--accent2); --delay: .5s;"></div>
            <div class="light-dot" style="--color: var(--accent);  --delay: .8s;"></div>
            <div class="light-dot" style="--color: var(--accent3); --delay: 1.1s;"></div>
            <div class="light-dot" style="--color: var(--accent2); --delay: 1.4s;"></div>
        </div>
    </div>

    <div class="ui-panel">
        <h1>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –¥–µ—Ä–µ–≤–Ω—è</h1>
        <p>
            –í–∫–ª—é—á–∞–π –º—É–∑—ã–∫—É, —Å–º–æ—Ç—Ä–∏ –Ω–∞ —Å–Ω–µ–≥ –∏ –æ–≥–æ–Ω—å–∫–∏ ‚Äî
            –∏ –ø—É—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –º–∞–ª–µ–Ω—å–∫–∏–π –∑–∏–º–Ω–∏–π –≥–æ—Ä–æ–¥. üéÑ
        </p>
        <div class="controls">
            <button id="playBtn" class="btn btn-primary">‚ñ∂ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
            <button id="giftBtn" class="btn btn-secondary">üéÅ –ü–æ–¥–∞—Ä–æ—á–µ–∫</button>
            <span class="hint">–ù–∞–∂–º–∏ –µ—â—ë —Ä–∞–∑ ‚Äî –±—É–¥–µ—Ç –ø–∞—É–∑–∞.</span>
        </div>
    </div>
</div>

<!-- –¢–æ–ª—å–∫–æ –∑–≤—É–∫, –±–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—è -->
<audio id="music" src="music.mp3" preload="auto" loop></audio>

<!-- –ú–æ–¥–∞–ª —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º -->
<div class="gift-modal" id="giftModal">
    <div class="gift-card">
        <div class="gift-close" id="giftClose">‚úï</div>
        <div class="gift-title">–° –ù–æ–≤—ã–º –≥–æ–¥–æ–º! üéÑ</div>
        <div class="gift-text">
            –ü—É—Å—Ç—å –≤ 2025 –≥–æ–¥—É —É —Ç–µ–±—è –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —è—Ä–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞,
            —Ç—ë–ø–ª—ã—Ö –ª—é–¥–µ–π —Ä—è–¥–æ–º –∏ –º–æ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—á–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞.
            –ù–µ–º–Ω–æ–≥–æ –º–∞–≥–∏–∏, –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–µ–≥–∞ –∏ –º–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è. ‚ú®
        </div>
        <button class="btn btn-secondary" id="giftOk">–°–ø–∞—Å–∏–±–æ üíô</button>
    </div>
</div>

<script>
    // ---------- –°–ù–ï–ì ----------
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");
    let flakes = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º, —á—Ç–æ–±—ã –Ω–∞ –±–æ–ª—å—à–∏—Ö –º–æ–Ω–∏—Ç–æ—Ä–∞—Ö –Ω–µ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª–æ
        const baseWidth = Math.min(window.innerWidth, 900);
        const flakesCount = Math.floor(baseWidth / 2); // –ø–ª–æ—Ç–Ω—ã–π, –Ω–æ —Ä–∞–∑—É–º–Ω—ã–π —Å–Ω–µ–≥

        flakes = [];
        for (let i = 0; i < flakesCount; i++) {
            flakes.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                r: Math.random() * 2 + 1,
                speedY: Math.random() * 0.7 + 0.4,
                speedX: Math.random() * 0.5 - 0.25,
                opacity: Math.random() * 0.5 + 0.3
            });
        }
    }
    window.addEventListener("resize", resize);
    resize();

    function drawSnow() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.fillStyle = "rgba(255,255,255,0.9)";

        for (const flake of flakes) {
            ctx.globalAlpha = flake.opacity;
            ctx.beginPath();
            ctx.arc(flake.x, flake.y, flake.r, 0, Math.PI * 2);
            ctx.fill();

            flake.y += flake.speedY;
            flake.x += flake.speedX;

            if (flake.y > canvas.height) {
                flake.y = -flake.r;
                flake.x = Math.random() * canvas.width;
            }
        }
        ctx.restore();
    }

    // ---------- –ú–£–ó–´–ö–ê (–Ω–∞–¥—ë–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç) ----------
    const playBtn = document.getElementById("playBtn");
    const audio = document.getElementById("music");
    let isPlaying = false;

    playBtn.addEventListener("click", async () => {
        try {
            if (!isPlaying) {
                await audio.play();
                isPlaying = true;
                playBtn.textContent = "‚è∏ –ü–∞—É–∑–∞";
            } else {
                audio.pause();
                isPlaying = false;
                playBtn.textContent = "‚ñ∂ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
            }
        } catch (err) {
            console.error("Audio error:", err);
            alert("–ë—Ä–∞—É–∑–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—É—Å–∫ –∑–≤—É–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å –µ—â—ë —Ä–∞–∑ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.");
        }
    });

    audio.addEventListener("play", () => {
        isPlaying = true;
        playBtn.textContent = "‚è∏ –ü–∞—É–∑–∞";
    });

    audio.addEventListener("pause", () => {
        isPlaying = false;
        playBtn.textContent = "‚ñ∂ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
    });

    // ---------- –ú–û–î–ê–õ "–ü–û–î–ê–†–û–ö" ----------
    const giftBtn = document.getElementById("giftBtn");
    const giftModal = document.getElementById("giftModal");
    const giftClose = document.getElementById("giftClose");
    const giftOk = document.getElementById("giftOk");

    const closeGift = () => giftModal.classList.remove("show");

    giftBtn.addEventListener("click", () => {
        giftModal.classList.add("show");
    });

    giftClose.addEventListener("click", closeGift);
    giftOk.addEventListener("click", closeGift);
    giftModal.addEventListener("click", (e) => {
        if (e.target === giftModal) closeGift();
    });

    // ---------- –ê–ù–ò–ú–ê–¶–ò–Ø / "–°–í–ï–¢–û–ú–£–ó–´–ö–ê" ----------
    let start = null;
    function animate(timestamp) {
        if (!start) start = timestamp;
        const t = (timestamp - start) / 1000;

        // –∫–æ–≥–¥–∞ –º—É–∑—ã–∫–∞ –∏–≥—Ä–∞–µ—Ç ‚Äî –ø—É–ª—å—Å–∞—Ü–∏—è —Å–∏–ª—å–Ω–µ–µ, –∫–æ–≥–¥–∞ –Ω–µ—Ç ‚Äî –º—è–≥—á–µ
        const base = isPlaying ? 0.45 : 0.25;
        const amp  = isPlaying ? 0.35 : 0.15;
        const beat = base + amp * (1 + Math.sin(t * 2)) / 2;

        document.documentElement.style.setProperty("--beat", beat.toFixed(3));

        drawSnow();
        requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);
</script>
</body>
</html>
